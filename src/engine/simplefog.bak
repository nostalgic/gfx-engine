export const FOG_FX = `
    float g_fogStepSize;
    float fog(vec3 p, float t) {
        float stepSize = 0.1;
        if(u_fog_enabled > 0.0) {
            vec3 pos = p * 1.25;
            pos.x *= 0.6;
            // Simple turbulence approximation
            pos.z += u_turb_amp * sin(u_turb_freq * pos.x + u_turb_speed * u_time);
            float yDistance = (pos * p).y;
            float clampedDistance = min(pos.y, -yDistance * 0.05);
            float adjustedDistance = 3.0 - 0.2 * t + clampedDistance;
            float boundedDistance = max(adjustedDistance * 2.0, -adjustedDistance * 0.6);
            stepSize = 0.02 + 0.2 * boundedDistance;
        }
        g_fogStepSize = stepSize;
        return stepSize;
    }
`;